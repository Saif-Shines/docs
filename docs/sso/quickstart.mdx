---
displayed_sidebar: homeSidebar
description: Step-by-step guide to implement Single Sign-on in your application using Scalekit's APIs
---

import InstallSDK from "@site/docs/sso/templates/_install-sdk.md";

# Getting Started with Single Sign-on
<Subtitle>Integrate with dozens of identity providers via SAML or OIDC</Subtitle>

Single Sign-On (SSO) enhances B2B SaaS application's security and offers a smooth user experience. Scalekit is an authentication platform that enables developers to implement enterprise features like SSO with just a few lines of code. Scalekit abstracts the complexities associated with SAML, OIDC and offers prebuilt integrations with all major identity providers like Okta, Microsoft Entra ID, Jumpcloud, Onelogin.

This quickstart guide will show you how to implement SSO using Scalekit.

<figure>![How Scalekit works](@site/docs/sso/assets/single-sign-on/quickstart/how-scalekit-connects.png)<figcaption>Scalekit offers turnkey SSO for B2B SaaS applications</figcaption></figure>

## 1. Environment Setup

Before diving in, make sure you have:

- Access to your Scalekit account and API credentials
- Your app's codebase for implementing and testing changes

### Install the Scalekit SDK

Scalekit offers language-specific SDKs for fast SSO integration. Use the installation instructions below for your technology stack.
<InstallSDK />

### Set up API credentials

Secure your Scalekit API communication by setting up environment variables. You'll need three key pieces of information from your Scalekit Dashboard:

1. **Environment URL**: The base URL for API calls. Each environment (dev, staging, prod) has a unique URL.
2. **Client ID**: Your app's unique identifier for Scalekit communications.
3. **Client Secret**: A private key to authenticate your API requests. For security purposes, this is generated only when you request using the Scalekit Dashboard.

#### Get Your Credentials

1. Log into your Scalekit Dashboard.
2. Select the "Development" environment.
3. Click on "API Config" to view your credentials.

#### Store Credentials Securely

Never hardcode secrets in your app. Use environment variables instead. Here's how to set them in a `.env` file:

```jsx title=".env"
SCALEKIT_ENVIRONMENT_URL = "https://b2b-app-dev.scalekit.com";
SCALEKIT_CLIENT_ID = "<COPY_CLIENT_ID_SCALEKIT_DASHBOARD>";
SCALEKIT_CLIENT_SECRET = "<COPY_SECRET_SCALEKIT_DASHBOARD>";
```

:::tip

- Never commit your <SimpleCode>.env </SimpleCode> file to version control.
- Rotate your <SimpleCode>secret </SimpleCode>regularly. See our best practices guide for managing secrets.
  :::

Now you're ready to start integrating SSO into your app! Next, we'll cover how to use the SDK to authenticate users.


## 2. Authorize the Users

To start Single Sign-On (SSO), your app must redirect users to the Scalekit Authorization URL.

Construct the Authorization URL using the following query parameters:

**Redirect URI**: Where Scalekit sends users after IdP authentication.

Example: <SimpleCode>https:<nolink />//your-saas-app.com/auth/callback</SimpleCode>

After auth, Scalekit adds a temporary <SimpleCode>code</SimpleCode> to this URI. You'll <SimpleCode>POST</SimpleCode> this <SimpleCode>code</SimpleCode> with your <SimpleCode>client_secret</SimpleCode> to get user details.

**SSO Connection Identifier**: Tells Scalekit which IdP to use.

Provide one of:

- <SimpleCode>organization_id</SimpleCode>: Preferred for both SAML and OIDC. -
  Example: <SimpleCode>org_12434341</SimpleCode>
- <SimpleCode>connection_id</SimpleCode>: Specific SSO connection ID. - Example:
  <SimpleCode>conn_121414141</SimpleCode>
- <SimpleCode>domain</SimpleCode>: Organization mandate for domain-wide SSO.
  This query parameter automatically detects the appropriate SSO connection. -
  Example: <SimpleCode>google.com</SimpleCode> or <SimpleCode>yourcustomerdomain.com</SimpleCode>

<SimpleCode>**client_id**</SimpleCode>: Your app's unique Scalekit identifier
which is mandatory for all requests. This Identifies both your app and the
environment (staging, prod).

<p style={{ textDecoration: "underline" }}>Example Authorization URL</p>

```sh title="Authorization URL"
https://auth.scalekit.com/authorize?
  client_id=skc_122056050118122349527&
  redirect_uri=https://yourapp.com/auth/callback&
  organization_id=org_12434341
```

This URL tells Scalekit:

- Your app ID (<SimpleCode>client_id</SimpleCode>)
- Where to send the user after auth (<SimpleCode>redirect_uri</SimpleCode>)
- Which organization's IdP to use (<SimpleCode>organization_id</SimpleCode>)

See our [Authorization URL Parameters Guide](/sso/guides/key-concepts/authorization-url) for a full list of accepted parameters.

Next, Construct your Authorization URL with these parameters and redirect users to this URL when they try to log in.

<Tabs groupId="tech-stack" queryString>
<TabItem value="nodejs" label="Node.js">

```javascript showLineNumbers
import { Scalekit } from "@scalekit-sdk/node";

// initialize the SDK client
const scalekit = new Scalekit(
  SCALEKIT_ENVIRONMENT_URL,
  SCALEKIT_CLIENT_ID,
  SCALEKIT_CLIENT_SECRET
);

// Option 1: Authorization URL with the organization ID
const authorizationURL = scalekit.getAuthorizationUrl(redirectUri, {
  organizationId: "org_12442",
  state: state, // optional
});

// Option 2: Authorization URL with login hint
const authorizationURL = scalekit.getAuthorizationUrl(redirectUri, {
  loginHint: "user@example.com", // optional
  organizationId: "org_12442",
});

// Option 3: Authorization URL with the connection ID
const authorizationURL = scalekit.getAuthorizationUrl(redirectUri, {
  connectionId: "conn_1242242",
});

// TODO: redirect the user to this authorizationURL
```

</TabItem>
<TabItem value="py" label="Python">

```python showLineNumbers
from scalekit import ScalekitClient, AuthorizationUrlOptions, CodeAuthenticationOptions

scalekit_client = ScalekitClient(
  <SCALEKIT_ENVIRONMENT_URL>,
  <SCALEKIT_CLIENT_ID>,
  <SCALEKIT_CLIENT_SECRET>
)

options = AuthorizationUrlOptions()


# Option 1: Authorization URL with the organization ID
options.organization_id = 'org_12442'

# Option 2: Authorization URL with login hint
options.login_hint = '<user@example.com>'

# Option 3: Authorization URL with the connection ID
options.connection_id = 'conn_1242242'

authorization_url = scalekit_client.get_authorization_url(
  redirect_uri=<redirect_uri>,
  options=options
)
```

</TabItem>
<TabItem value="golang" label="Go">

```go showLineNumbers

import (
  "github.com/scalekit/scalekit-sdk-go"
)

func main() {
  sc := scalekit.NewScalekitClient(
    SCALEKIT_ENVIRONMENT_URL,
    SCALEKIT_CLIENT_ID,
    SCALEKIT_CLIENT_SECRET
  )

  options := scalekit.AuthorizationUrlOptions{}
  // use one of the three strategies below to determine how to log the user in.

  // If you would like to authenticate the user via connection_id
  options.ConnectionId = "conn_1242242"

  // If you would like to authenticate the user via organization_id
  options.OrganizationId = "org_12442"

  // If you would like to authenticate the user via provider
  options.Provider = "google"

  // If you would like to authenticate the user via their email address
  // Domain portion of the user's email address is used to detect the appropriate enterprise SSO connection
  options.LoginHint = "<user@example.com>"

  authorizationURL := sc.GetAuthorizationUrl(
    redirectUrl,
    options,
  )
  // next step is to redirect the user to this authorizationURL
}
```

</TabItem>
</Tabs>

Finally, handle the callback at your <SimpleCode>redirect_uri</SimpleCode> to complete the Authentication. Understand user authorization procedure through a NextJS example for [adding SSO to the Login Page](/sso/guides/setup-sso/build-login-page)

## 3. Fetch User Details

After a successful SSO, Scalekit redirects the user to your <SimpleCode>redirect_uri</SimpleCode> with a unique <SimpleCode>code</SimpleCode> in the browser. Exchange the <SimpleCode>code</SimpleCode> for user profile details (on the serverside).

Here's how to turn that <SimpleCode>code</SimpleCode> into user data:

<Tabs groupId="tech-stack" queryString>
<TabItem value="nodejs" label="Node.js">

```javascript showLineNumbers
const {
  code,
  error,
  error_description,
  idp_initiated_login,
  connection_id,
  relay_state,
} = req.query;

if (error) {
  // handle errors
}

// If it is an idp initiated login
if (idp_initiated_login && idp_initiated_login === "success") {
  const authorizationURL = scalekit.getAuthorizationUrl(redirectUri, {
    connectionId: connection_id,
    ...(relay_state && { state: relay_state }), // optional: pass relay state
  });

  // Next:redirect the user to this authorizationURL
}

const res = await scalekit.authenticateWithCode({
  code: code,
  redirectUri: redirectUri,
});

// res.user has the authenticated user's details
const userEmail = res.user.email;

// Next step: create a session for this user and allow access
```

</TabItem>
<TabItem value="py" label="Python">

```python showLineNumbers
from scalekit import ScalekitClient, AuthorizationUrlOptions, CodeAuthenticationOptions

scalekit_client = ScalekitClient(<SCALEKIT_ENVIRONMENT_URL>, <SCALEKIT_CLIENT_ID>, <SCALEKIT_CLIENT_SECRET>)

# Handle the oauth redirect_url
# fetch code and error_description from request parameters.
code = request.args.get('code')
error = request.args.get('error')
error_description = request.args.get('error_description')
idp_initiated_login = request.args.get('idp_initiated_login')
connection_id = request.args.get('connection_id')
relay_state = request.args.get('relay_state')

if error:
    raise Exception(error_description)

result = scalekit_client.authenticate_with_code(<code>, <redirect_uri>)
# result.user has the authenticated user's details
user_email = result.user.email

# create a session and redirect the user to your dashboard
```

</TabItem>
<TabItem value="golang" label="Go">

```go showLineNumbers

import (
  "github.com/scalekit/scalekit-sdk-go"
)

func main() {
  sc := scalekit.NewScalekitClient(
    SCALEKIT_ENVIRONMENT_URL,
    SCALEKIT_CLIENT_ID,
    SCALEKIT_CLIENT_SECRET
  )

  // Handle the oauth redirect_url
  // fetch code and error_description from request parameters.
  code := r.URL.Query().Get("code")
  error := r.URL.Query().Get("error")
  errorDescription := r.URL.Query().Get("error_description")
  idpInitiatedLogin := r.URL.Query().Get("idp_initiated_login")
  connectionID := r.URL.Query().Get("connection_id")
  relayState := r.URL.Query().Get("relay_state")

  if error != "" {
    // handle errors
  }

  if idpInitiatedLogin != "" && idpInitiatedLogin == "success" {
    // handle idp initiated login
    authorizationURL := sc.GetAuthorizationUrl(redirectUrl, {
      ConnectionId: connectionID,
      RelayState: relayState,
    })
    // next step is to redirect the user to this authorizationURL
  }

  // if there are no errors and if this is not an IdP initiated SSO, then authenticate with the code
  res, err := sc.AuthenticateWithCode(code, redirectUrl)
  if err != nil {
    // handle errors
  }

  // res.User has the authenticated user's details
  userEmail := res.User.Email

  // create a session and redirect the user to your dashboard
}
```

</TabItem>
</Tabs>




We mitigate [risks](/sso/guides/setup-sso/implement-idp-initiated-sso) for the users by performing Service Provider (SP) initiated authorization when users accesses from the IdP instead of your app.
